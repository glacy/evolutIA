Metadata-Version: 2.4
Name: evolutia
Version: 0.1.3
Summary: Sistema automatizado para generar preguntas de examen desafiantes basadas en materiales did√°cticos existentes
Home-page: https://github.com/glacy/evolutIA
Author: Gerardo Lacy-Mora
Author-email: gerardolacymora@gmail.com
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: PyYAML
Requires-Dist: requests
Requires-Dist: python-dotenv
Requires-Dist: openai
Requires-Dist: anthropic
Requires-Dist: google-generativeai
Requires-Dist: tqdm
Provides-Extra: rag
Requires-Dist: chromadb; extra == "rag"
Requires-Dist: tiktoken; extra == "rag"
Requires-Dist: sentence-transformers; extra == "rag"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# EvolutIA: Generador de preguntas de examen

Eres profesor de M√©todos Matem√°ticos para F√≠sica e Ingenier√≠a. Cada semestre te enfrentas al mismo desaf√≠o: crear ex√°menes desafiantes y justos que eval√∫en realmente el aprendizaje de tus estudiantes.

El problema es real: **los estudiantes memorizan ejercicios de semestres anteriores**. Necesitas crear nuevas variaciones cada vez, lo que toma horas de tu tiempo valioso. Adem√°s, quieres mantener la coherencia con los materiales que ense√±aste en clase: lecturas, pr√°cticas y tareas.

## ¬øQu√© es EvolutIA?

EvolutIA es tu asistente de IA que transforma este proceso tedioso en algo tan simple como ejecutar un comando.

> **En pocas palabras**: EvolutIA toma tus ejercicios existentes y genera versiones m√°s complejas y desafiantes, manteniendo el formato y estructura que tus estudiantes ya conocen. O, si prefieres, puede crear ejercicios nuevos desde cero basados en los temas que impartiste.

### ¬øPor qu√© usar EvolutIA?

| **Sin EvolutIA** | **Con EvolutIA** |
|-----------------|-----------------|
| 2-3 horas para crear variaciones de ejercicios | 5 minutos ejecutando un comando |
| Riesgo de crear ejercicios muy simples | Validaci√≥n autom√°tica de complejidad matem√°tica |
| Ejercicios desconectados de lo que ense√±aste | Contexto alineado con tus lecturas y pr√°cticas |
| Proceso manual repetitivo y propenso a errores | Automatizaci√≥n consistente y confiable |
| Dificultad para crear m√∫ltiples versiones | Generaci√≥n ilimitada de variaciones √∫nicas |

### Caracter√≠sticas Principales

- **üîÑ Variaci√≥n Inteligente**: Incrementa la complejidad matem√°tica de ejercicios existentes mientras mantiene el formato familiar
- **‚ú® Creaci√≥n desde Cero**: Genera ejercicios nuevos basados en temas y tags que definiste
- **üìö RAG (Retrieval-Augmented Generation)**: Usa tus propias lecturas y ejercicios previos como contexto para generar contenido perfectamente alineado a tu curso
- **ü§ñ Multi-Proveedor**: Soporte nativo para OpenAI (GPT-4), Anthropic (Claude 3), Google (Gemini 1.5), DeepSeek y modelos locales v√≠a Ollama
- **‚úÖ Validaci√≥n Autom√°tica**: Asegura que las nuevas preguntas sean matem√°ticamente m√°s exigentes
- **üìù Formato MyST**: Salida compatible con Curvenote y Jupyter Book, lista para publicar

---

## C√≥mo Funciona en 3 Pasos

### Paso 1: Prepara tus Materiales

Organiza tus materiales en carpetas por tema:

```
MiCurso/
‚îú‚îÄ‚îÄ analisis_vectorial/       # Tema 1
‚îÇ   ‚îú‚îÄ‚îÄ semana1_practica.md
‚îÇ   ‚îî‚îÄ‚îÄ semana2_lectura.md
‚îú‚îÄ‚îÄ matrices/                 # Tema 2
‚îÇ   ‚îú‚îÄ‚îÄ semana3_practica.md
‚îÇ   ‚îî‚îÄ‚îÄ semana4_lectura.md
‚îú‚îÄ‚îÄ tareas/                   # Tareas de evaluaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ tarea1/tarea1.md
‚îÇ   ‚îî‚îÄ‚îÄ tarea2/tarea2.md
‚îî‚îÄ‚îÄ examenes/                 # Aqu√≠ aparecer√°n los ex√°menes generados
```

### Paso 2: Configura tu API Key

Crea un archivo `.env` en la ra√≠z de tu proyecto:

```bash
OPENAI_API_KEY=sk-...  # O el proveedor que prefieras
```

### Paso 3: Genera tu Examen

```bash
# ¬°Un solo comando!
evolutia --tema analisis_vectorial --num_ejercicios 3 --output examenes/parcial1
```

En 5 minutos, tendr√°s 3 ejercicios desafiantes, con sus soluciones, listos para tu examen.

---

## Historias de Uso Reales

### üìñ Historia 1: Creando un Parcial de An√°lisis Vectorial

**El contexto**: Es semana 8 del semestre y necesitas un parcial sobre An√°lisis Vectorial. Tienes los ejercicios de la pr√°ctica del semestre pasado, pero no puedes usarlos tal cual porque los estudiantes ya los conocen.

**Con EvolutIA**:

```bash
evolutia --tema analisis_vectorial --num_ejercicios 5 --complejidad alta --output examenes/parcial1
```

**Resultado**:
- ‚úÖ 5 nuevos ejercicios, cada uno m√°s complejo que el original
- ‚úÖ Soluciones completas paso a paso
- ‚úÖ Formato MyST listo para Jupyter Book
- ‚úÖ Archivos individuales por ejercicio para f√°cil distribuci√≥n
- ‚è±Ô∏è Tiempo total: 5 minutos (en lugar de 2-3 horas manualmente)

**Lo que obtienes**:
```
examenes/parcial1/
‚îú‚îÄ‚îÄ examen_parcial1.md          # Examen completo
‚îú‚îÄ‚îÄ ej1_parcial1.md             # Ejercicio 1 + soluci√≥n
‚îú‚îÄ‚îÄ ej2_parcial1.md             # Ejercicio 2 + soluci√≥n
‚îú‚îÄ‚îÄ ej3_parcial1.md             # Ejercicio 3 + soluci√≥n
‚îú‚îÄ‚îÄ ej4_parcial1.md             # Ejercicio 4 + soluci√≥n
‚îî‚îÄ‚îÄ ej5_parcial1.md             # Ejercicio 5 + soluci√≥n
```

---

### üìñ Historia 2: Generando un Quiz R√°pido de Repaso

**El contexto**: Es semana 12 y quieres un quiz r√°pido de 3 ejercicios de repaso sobre Matrices. No necesitas ejercicios muy complejos, solo una pr√°ctica refrescante.

**Con EvolutIA**:

```bash
evolutia --tema matrices --num_ejercicios 3 --complejidad media --output examenes/quiz_repaso
```

**Resultado**:
- ‚úÖ 3 ejercicios de nivel medio, perfectos para un quiz r√°pido
- ‚úÖ Soluciones concisas y claras
- ‚úÖ Todos los ejercicios alineados con lo que ense√±aste en clase
- ‚è±Ô∏è Tiempo total: 3 minutos

---

### üìñ Historia 3: Usando Contexto del Curso con RAG

**El contexto**: Quieres crear un examen final sobre Teorema de Stokes. Ense√±aste usando notaci√≥n espec√≠fica y ejemplos particulares en tus lecturas. Quieres que el examen refleje exactamente ese enfoque.

**Primero, indexa tus materiales** (solo la primera vez):

```bash
evolutia --tema stokes --use_rag --reindex --output examenes/final
```

**Luego, genera el examen** (usar√° el contexto que ya tienes):

```bash
evolutia --tema stokes --num_ejercicios 4 --use_rag --output examenes/final
```

**Resultado**:
- ‚úÖ 4 ejercicios que usan la misma notaci√≥n que tus lecturas
- ‚úÖ Ejemplos alineados con lo que ense√±aste en clase
- ‚úÖ Referencias a los materiales espec√≠ficos del curso
- ‚è±Ô∏è Tiempo total: 8 minutos (5 para indexar, 3 para generar)

**Nota**: El √≠ndice RAG se reutiliza en futuros ex√°menes, as√≠ que el tiempo disminuye dr√°sticamente.

---

## Instalaci√≥n R√°pida

### Requisitos Previos

- Python 3.8 o superior
- API Key de tu proveedor preferido (OpenAI, Anthropic, Google) o un servidor local (Ollama)

### Paso 1: Crear Entorno Virtual (Recomendado)

```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

### Paso 2: Instalar EvolutIA

```bash
pip install evolutia
```

### Paso 3: Configurar API Keys

Crea un archivo `.env` en la ra√≠z de tu proyecto:

```bash
OPENAI_API_KEY=sk-...
# O el proveedor que prefieras:
# ANTHROPIC_API_KEY=sk-ant-...
# GOOGLE_API_KEY=...
# DEEPSEEK_API_KEY=sk-...
```

### Paso 4: ¬°Est√°s listo!

```bash
# Verifica que funciona
evolutia --analyze
```

---

## Gu√≠a de Uso Completa

### Modos de Operaci√≥n

#### üîÑ Modo Variaci√≥n (M√°s Com√∫n)

Toma ejercicios existentes y crea versiones m√°s complejas.

**Uso b√°sico**:
```bash
evolutia --tema <tema> --num_ejercicios <cantidad> --output <directorio>
```

**Ejemplos**:

```bash
# Generar 1 variaci√≥n del tema 'analisis_vectorial'
evolutia --tema analisis_vectorial --num_ejercicios 1 --output examenes/parcial1

# Generar 3 variaciones con alta complejidad
evolutia --tema matrices --num_ejercicios 3 --complejidad muy_alta --output examenes/dificil

# Variar ejercicios espec√≠ficos por su etiqueta (Label)
evolutia --tema analisis_vectorial --label ex1-s1 ex2-s1 --output examenes/recuperacion
```

#### ‚ú® Modo Creaci√≥n

Genera ejercicios nuevos desde cero basados en temas y tags.

**Uso b√°sico**:
```bash
evolutia --mode creation --tema <tema> --num_ejercicios <cantidad> --output <directorio>
```

**Ejemplos**:

```bash
# Crear 3 ejercicios nuevos sobre 'numeros_complejos'
evolutia --mode creation --tema numeros_complejos --num_ejercicios 3 --output examenes/quiz1

# Crear ejercicios con tags espec√≠ficos
evolutia --mode creation --tema vectores --tags producto --num_ejercicios 2 --output examenes/quiz_producto
```

#### üìö Modo RAG (Retrieval-Augmented Generation)

Usa tus propias lecturas y pr√°cticas como contexto para generar ejercicios perfectamente alineados a tu curso.

**Primer uso (indexar materiales)**:
```bash
evolutia --tema <tema> --use_rag --reindex --num_ejercicios <cantidad> --output <directorio>
```

**Usos posteriores (usar √≠ndice ya creado)**:
```bash
evolutia --tema <tema> --use_rag --num_ejercicios <cantidad> --output <directorio>
```

**Ejemplo completo**:
```bash
# Primero: Indexar y generar examen final
evolutia --tema stokes --use_rag --reindex --num_ejercicios 4 --output examenes/final

# Despu√©s: Generar otro examen con el mismo √≠ndice (m√°s r√°pido)
evolutia --tema stokes --use_rag --num_ejercicios 3 --output examenes/recuperacion
```

### Consultar tu Base de Conocimiento

Preg√∫ntale al sistema qu√© sabe sobre un concepto (√∫til para verificar que RAG funcion√≥ correctamente):

```bash
evolutia --query "Teorema de Stokes"
evolutia --query "Producto vectorial en R^3"
evolutia --query "M√©todo de integraci√≥n por partes"
```

---

## Configuraci√≥n Avanzada

### Archivo de Configuraci√≥n

Puedes crear un archivo `evolutia_config.yaml` en la ra√≠z de tu carpeta de curso para personalizar el comportamiento:

```yaml
api:
  provider: "openai"  # openai, anthropic, gemini, deepseek, generic, local
  model: "gpt-4"

rag:
  enabled: true
  vector_store:
    persist_directory: "./storage/vector_store"
    collection_name: "ejercicios_mmfi"
  retrieval:
    top_k: 5
    similarity_threshold: 0.7

complexity:
  default_level: "alta"  # media, alta, muy_alta
```

### Generar Configuraci√≥n Autom√°ticamente

EvolutIA puede analizar tu estructura de carpetas y generar una configuraci√≥n apropiada:

```bash
evolutia --analyze
```

### Argumentos CLI Disponibles

| Argumento | Descripci√≥n | Default |
|-----------|-------------|---------|
| `--tema` | Identificador del tema (carpeta) | **Requerido** |
| `--output` | Carpeta de salida | **Requerido** |
| `--num_ejercicios` | Cantidad a generar | 1 |
| `--complejidad` | Nivel objetivo (`media`, `alta`, `muy_alta`) | `alta` |
| `--api` | Proveedor (`openai`, `anthropic`, `gemini`, `deepseek`, `generic`, `local`) | `openai` |
| `--type` | Tipo de pregunta (`problem`, `multiple_choice`) | `problem` |
| `--no_generar_soluciones` | Omitir la creaci√≥n de archivos de soluci√≥n | False |
| `--model` | Nombre espec√≠fico del modelo (√∫til para `generic`) | None |
| `--base_url` | URL base de la API (√∫til para `generic` o `local`) | None |

---

## Proveedores de IA Soportados

### OpenAI (GPT-4)

```bash
evolutia --tema analisis_vectorial --api openai --output examen_openai
```

### Anthropic (Claude 3)

```bash
evolutia --tema analisis_vectorial --api anthropic --output examen_anthropic
```

### Google (Gemini 1.5)

```bash
evolutia --tema analisis_vectorial --api gemini --output examen_gemini
```

### DeepSeek (Econ√≥mico y Poderoso)

```bash
evolutia --tema analisis_vectorial --api deepseek --output examen_deepseek
```

### Modelos Locales (Offline y Gratis)

Para usar modelos como Llama 3 o Mistral sin costo de API:

1. Ejecuta tu servidor local:
```bash
ollama serve
```

2. Configura (opcional, usa defaults de Ollama):
```yaml
# evolutia_config.yaml
local:
  base_url: "http://localhost:11434/v1"
  model: "llama3"
```

3. Ejecuta:
```bash
evolutia --tema analisis_vectorial --api local --output examen_local
```

### Proveedores Gen√©ricos (Groq, Mistral API, etc.)

```bash
evolutia --tema analisis_vectorial --api generic --base_url https://api.groq.com/openai/v1 --model llama3-70b-8192 --output examen_groq
```

---

## Gesti√≥n de Materiales

### C√≥mo "Ve" EvolutIA tus Ejercicios

EvolutIA usa una estrategia inteligente para encontrar tus materiales:

**1. Escaneo de Carpetas**:
Busca archivos `.md` dentro de la carpeta del tema:
```
analisis_vectorial/
‚îú‚îÄ‚îÄ semana1_practica.md     # ‚úÖ Encontrado autom√°ticamente
‚îú‚îÄ‚îÄ semana2_lectura.md      # ‚úÖ Encontrado autom√°ticamente
```

**2. Tags y Metadatos**:
Para archivos fuera de la carpeta del tema (ej. en `tareas/`), usa el *frontmatter* YAML:

```yaml
---
title: Tarea 1: Aplicaciones de Stokes
tags:
  - stokes                    # <--- ¬°Importante! Esto permite encontrarlo
  - analisis_vectorial
  - integrales
---
```

### Trazabilidad

Los ejercicios generados heredan los tags de sus "padres". El archivo final del examen (`examenX.md`) resume todos los temas cubiertos, facilitando la trazabilidad de lo que se eval√∫a.

---

## Rendimiento y Optimizaciones

EvolutIA est√° optimizado para ser r√°pido y eficiente, incluso generando m√∫ltiples ejercicios:

### ‚ö° Cach√© Inteligente

- **Cache de respuestas LLM**: Evita llamar a la API para preguntas repetidas, ahorrando tiempo y dinero
- **Cache de archivos escaneados**: No reescanea el filesystem si tus archivos no cambiaron
- **Configuraci√≥n**: Por defecto, usa 500MB de cach√© con expiraci√≥n de 24 horas

### üöÄ Generaci√≥n As√≠ncrona

- Genera m√∫ltiples ejercicios en paralelo usando async/await
- Reintentos autom√°ticos si la API falla temporalmente
- Sistema de "Circuit Breaker" para evitar saturar servicios que est√°n fallando

### üìä RAG Optimizado

- **Lazy loading**: Los modelos de embeddings solo se cargan si usas RAG
- **Paginaci√≥n**: Queries limitadas para no cargar colecciones enteras en memoria
- **Result**: Inicio r√°pido y uso eficiente de recursos

### üíæ Ahorro de Espacio

- Eliminado ~12k l√≠neas duplicadas del c√≥digo base
- Build/ no versionado en git
- Estructura limpia y mantenible

---

## Herramienta de IA Asistente: opencode

El proceso de optimizaci√≥n de EvolutIA fue asistido por **opencode**, una herramienta de IA especializada en ingenier√≠a de software, utilizando el modelo **GLM-4.7 (zai-coding-plan/glm-4.7)**.

### Optimizaciones Implementadas

Gracias a la asistencia de opencode, se implementaron 9 optimizaciones prioritarias:

#### Prioridad Alta
- ‚úÖ Cach√© LLM: write-behind con debounce para reducir I/O de disco
- ‚úÖ Eliminaci√≥n de build/ del control de versiones (reducci√≥n de ~12k l√≠neas duplicadas)

#### Prioridad Media
- ‚úÖ Implementaci√≥n de async/await para llamadas LLM (mayor throughput)
- ‚úÖ L√≠mite de memoria RAM para cach√© LLM (evitar saturaci√≥n)

#### Prioridad Baja
- ‚úÖ Imports centralizados en m√≥dulo evolutia/imports.py
- ‚úÖ Cach√© de rutas de archivos v√°lidos en MaterialExtractor
- ‚úÖ Lazy loading de embeddings en RAGIndexer/RAGRetriever
- ‚úÖ L√≠mite de paginaci√≥n para queries ChromaDB
- ‚úÖ Sistema de retry autom√°tico con backoff exponencial

### Beneficios Obtenidos

- **Menos tiempo de desarrollo**: Las optimizaciones se implementaron de manera eficiente y coordinada
- **C√≥digo m√°s limpio**: Reducci√≥n de duplicaci√≥n y mejora de mantenibilidad
- **Mejor documentaci√≥n**: Actualizaci√≥n completa de CHANGELOG y documentaci√≥n t√©cnica
- **Tests pasando**: Todas las optimizaciones mantuvieron compatibilidad con tests existentes
- **Arquitectura consistente**: Todas las optimizaciones siguen las convenciones y patrones del proyecto

---

## Estructura del Proyecto

Se recomienda la siguiente estructura para tus cursos:

```
MiCurso/
‚îú‚îÄ‚îÄ evolutia_config.yaml      # Configuraci√≥n espec√≠fica del curso
‚îú‚îÄ‚îÄ analisis_vectorial/       # Materiales del tema 1
‚îÇ   ‚îú‚îÄ‚îÄ lectura.md
‚îÇ   ‚îî‚îÄ‚îÄ practica.md
‚îú‚îÄ‚îÄ matrices/                 # Materiales del tema 2
‚îú‚îÄ‚îÄ examenes/                 # Salida generada por EvolutIA
‚îî‚îÄ‚îÄ .env                      # API Keys (no subir a git)
```

---

## Contribuciones y Desarrollo

El c√≥digo fuente est√° organizado modularmente en `evolutia/`:
- `evolutia_engine.py`: Orquestador principal
- `variation_generator.py`: L√≥gica de prompts y llamadas a LLMs
- `rag/`: Subsistema de indexaci√≥n y recuperaci√≥n

Para reportar bugs o mejoras, por favor visita el repositorio en GitHub.

---

## Licencia

Apache 2.0
